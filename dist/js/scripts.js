let pokemonRepository=function(){let e=[],t=document.querySelector("#pokemon-search");function n(){return e}function i(t){e.push(t)}function o(t,n){t.preventDefault();!function e(t,n){let i=document.querySelector(".pokemon-search-wrapper");if(i.innerHTML="",0!==t.length)t.forEach(function(e){let t=document.createElement("span");t.innerHTML=n,t.classList.add("search-sequence");let o=e.name.indexOf(n),a=e.name.slice(0,o),l=e.name.slice(o+n.length);searchItem=a+t.outerHTML+l;let s=document.createElement("li");s.classList.add("list-group-item","p-0","border-0");let d=document.createElement("button");d.innerHTML=searchItem,d.classList.add("btn","btn-primary","button"),d.setAttribute("type","button"),d.setAttribute("data-bs-toggle","modal"),d.setAttribute("data-bs-target","#pokemon-modal"),s.appendChild(d),i.appendChild(s),r(d,e)}),i.classList.add("pokemon-search-wrapper--visible");else{let o=document.createElement("p");o.textContent="No pokemon found",i.appendChild(o),i.classList.add("pokemon-search-wrapper--visible")}window.addEventListener("click",()=>{i.classList.remove("pokemon-search-wrapper--visible")}),window.addEventListener("keydown",e=>{"Escape"===e.key&&i.classList.remove("pokemon-search-wrapper--visible")})}(e.filter(function(e){if(e.name.includes(n))return e}),n)}function a(e){var t;(t=e,s(),fetch(t.detailsUrl).then(function(e){return d(),e.json()}).then(function(e){t.id=e.id,t.name=e.name,t.imageUrl=e.sprites.front_default,t.height=e.height,t.types=e.types}).catch(function(e){console.error(e)})).then(function(){modal.showModal(e)})}function r(e,t){e.addEventListener("click",function(){a(t)})}t.addEventListener("input",e=>{o(e,t.value.toLowerCase())});let l=document.querySelector("#loading-modal");function s(){l.classList.add("show","d-block")}function d(){l.classList.remove("show","d-block")}return{getAll:n,add:i,find:o,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("list-group-item","p-0","border-0");let o=document.createElement("button");o.innerText=t.name,o.classList.add("button"),o.classList.add("btn","btn-primary"),o.setAttribute("type","button"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#pokemon-modal"),i.appendChild(o),n.appendChild(i),r(o,t)},loadList:function e(){return s(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=905").then(function(e){return d(),e.json()}).then(function(e){e.results.forEach(function(e){i({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},showDetails:a}}(),modal=function(){let e=document.querySelector("#pokemon-name"),t=document.querySelector(".modal-body"),n=document.querySelector(".modal-footer");function i(e,t,n){e.addEventListener("click",()=>{!function e(t,n){let i=JSON.parse(JSON.stringify(t));if("left"===n){if(1===t.id)return;{let o=`https://pokeapi.co/api/v2/pokemon/${t.id-1}/`;i.detailsUrl=o,pokemonRepository.showDetails(i)}}else if("right"===n){if(905===t.id)return;{let a=`https://pokeapi.co/api/v2/pokemon/${t.id+1}/`;i.detailsUrl=a,pokemonRepository.showDetails(i)}}}(t,n)})}return{showModal:function o(a){e.textContent="",t.innerHTML="",n.innerHTML="";let r=document.createElement("div");r.classList.add("d-flex","flex-column","align-items-center","arrow-wrapper");let l=document.createElement("div");l.classList.add("d-flex","flex-column","align-items-center","arrow-wrapper");let s=document.createElement("p");s.textContent="Previous",s.classList.add("mb-0","p-0");let d=document.createElement("p");d.textContent="Next",d.classList.add("mb-0","p-0","pe-1");let p=document.createElement("img");p.classList.add("modal-icons"),p.setAttribute("id","left-arrow"),p.setAttribute("src","./img/icon_arrow_left.svg");let c=document.createElement("img");c.classList.add("modal-icons"),c.setAttribute("id","right-arrow"),c.setAttribute("src","./img/icon_arrow_right.svg"),e.textContent=a.name;let m=document.createElement("div");m.classList.add("detail-wrapper");let u=document.createElement("div");u.classList.add("description-wrapper");let h=document.createElement("img");h.src=a.imageUrl,h.classList.add("pokemon-image");let f=document.createElement("p");f.textContent=`Height: ${a.height/10} m`;let L=[];a.types.forEach(function(e){L.push(e.type.name)});let b=document.createElement("p");b.textContent=`Types: ${L.join(", ")}`,m.appendChild(h),u.appendChild(f),u.appendChild(b),m.appendChild(u),t.appendChild(m),r.appendChild(p),r.appendChild(s),l.appendChild(c),l.appendChild(d),n.appendChild(r),n.appendChild(l),i(r,a,"left"),i(l,a,"right")}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});